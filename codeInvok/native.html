<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">


    </style>
</head>
<body>
<h3>2.2.	原生广告</h3>
<h4>2.2.1.	广告接入代码示例</h4>
<p>原生广告代码较多，这里只截取片段，具体参考demo</p>
    <pre><code>    //初始化并加载广告
        private void loadNativeAd(final RefreshMode refreshMode) {
        // <span class="codezhushi"><span style="font-size: 20px">1、</span>创建HKNativeAd对象,并传入原生广告位id</span>
        mHKNativeAd = new HKNativeAd(this,testUnitId);
        //setp2 : set callback listener(HkNativeAdListener)
        mHKNativeAd.setNativeAdListener(new HkNativeAdListener() {
            @Override
            public void onNativeAdLoaded() {
                //ad load  success ,you can do other something here;
                showAd();
                Toast.makeText(NativeAdSpreadSampleActivity.this, "ad load  success", Toast.LENGTH_LONG).show();
            }
            @Override
            public void onNativeAdFailed(int errorCode) {
                /**
                * errorCode 为聚合sdk内部统一转码后的code，具体的errorCode可以查看log
                * 每种errorCode产生原因可以参考admob和facebook平台的错误码说明
                */
                Toast.makeText(NativeAdSpreadSampleActivity.this, "ad load  failed,error code is:" + errorCode, Toast.LENGTH_LONG).show();
            }
            @Override
            public void onAdClick() {
                Toast.makeText(NativeAdSpreadSampleActivity.this, "ad click", Toast.LENGTH_LONG).show();
            }
        });
        /**
        * setImgUrlMode(false) 可以设置返回图片的模式,true为只返回图片的Url，false为返回图片资源，默认为false
        */
        mHKNativeAd.loadAd(new HawkAdRequest().setImgUrlMode(true)
        //设置mopub广告要显示的view,要接mopub平台的原生，必须设置这个
        .setMoPubViewBinder(new ViewBinder.Builder(R.layout.mopub_native_ad_layout)
        .titleId(R.id.native_ad_title)
        .textId(R.id.native_ad_text)
        .mainImageId(R.id.native_ad_main_image)
        .iconImageId(R.id.native_ad_icon_image)
        .privacyInformationIconImageId(R.id.native_ad_daa_icon_image)
        .build()));


        /**
            * 原生广告请求成功后，在app需要展示广告时调用
            */
        /**
        * if load nativeAd success,you can get and show nativeAd;
        */
        private void showAd(){
            if(mHKNativeAd != null){
                if (!mHKNativeAd.isLoaded()) {
                    Toast.makeText(NativeAdSpreadSampleActivity.this,
                    "no native ad loaded!", Toast.LENGTH_SHORT).show();
                    return;
                }
                if (nativeAdContainer != null) {
                    // remove old ad view
                    nativeAdContainer.removeAllViews();
                }
                //the mAdView is custom by publisher
                mAdView = NativeViewBuild.createAdView(getApplicationContext(), mHKNativeAd);
                if (mHKNativeAd != null) {
                mHKNativeAd.unregisterView();
                nativeAdContainer.addView(mAdView);
                /**
                * 在广告显示后必须要调用registerViewForInteraction()方法，否则点击事件不生效
                */
                mHKNativeAd.registerViewForInteraction(mAdView);
            }
            //add the mAdView into the layout of view container.(the container should be prepared by youself)
        }
    </code></pre>

<h4>2.2.2	原生广告主要API</h4>
<ul>
    <li>
        <p><strong>com.hawk.android.adsdk.ads.HKNativeAd:</strong></p>
        <p>原生广告入口，用于初始化并加载原生广告</p>
        <table>
            <thead>
            <tr>
                <th align="left">方法名</th>
                <th align="left">方法介绍</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td align="left">HKNativeAd(Context context, String unitId)</td>
                <td align="left">原生广告构造函数，unitId为广告平台对应广告位ID</td>
            </tr>
            <tr>
                <td align="left">loadAd(HawkAdRequest adRequest)</td>
                <td align="left">加载广告，adRequest可用于添加第三方平台的测试设备ID,设备ID可从facebook的log中查看到</td>
            </tr>
            <tr>
                <td align="left">HawkAdRequest . ddTestDevice("XXXXXX-XXXXX")</td>
                <td align="left">添加测试facebook测试设备ID(<a href="">测试设备Id</a>)</td>
            </tr>
            <tr>
                <td align="left">HawkAdRequest . setImgUrlMode(true)</td>
                <td align="left">设置返回原生广告图片的url需要自己联网加载,设置false将会直接返回图片,不设置默认为false</td>
            </tr>
            <tr>
                <td align="left">getAd()</td>
                <td align="left">原生广告请求成功后，获取到原生广告对象</td>
            </tr>
            <tr>
                <td align="left">registerViewForInteraction(View nativeAdView)</td>
                <td align="left">原生广告完成填充后需要调用给该方法，以确保点击有效(<span style="color: red">不调用，广告被点击SDK将不会做出响应</span>)</td>
            </tr>
            </tbody>
        </table>
    </li>

    <li>
        <p><strong>com.hawk.android.adsdk.ads.mediator.HkNativeAdListener:</strong></p>
        <p>广告状态回调接口</p>
        <table>
            <thead>
            <tr>
                <th align="left">方法名</th>
                <th align="left">方法介绍</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td align="left">onNativeAdLoaded()</td>
                <td align="left">广告加载成功回调</td>
            </tr>
            <tr>
                <td align="left">onNativeAdFailed(int errCode)</td>
                <td align="left">广告加载失败，errCode用于描述失败原因。参考文档中<a href="#errorCode">ErrorCode相关章节</a></td>
            </tr>
            <tr>
                <td align="left">onAdClick()</td>
                <td align="left">广告被点击时回调</td>
            </tr>
            </tbody>
        </table>
    </li>
</ul>

</body>
</html>